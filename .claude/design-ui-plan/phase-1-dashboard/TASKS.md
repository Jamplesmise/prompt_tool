# Phase 1: å·¥ä½œå°é‡æ„ - ä»»åŠ¡æ¸…å•

## ä»»åŠ¡æ¦‚è§ˆ

| ä»»åŠ¡ ID | ä»»åŠ¡åç§° | æ”¹åŠ¨æ–‡ä»¶æ•° | ä»£ç é‡ | çŠ¶æ€ |
|---------|----------|-----------|--------|------|
| P1-T1 | åˆ›å»º StatCard ç»Ÿè®¡å¡ç‰‡ç»„ä»¶ | 2 | ~100 è¡Œ | âœ… |
| P1-T2 | åˆ›å»º QuickStart å¿«é€Ÿå¼€å§‹ç»„ä»¶ | 2 | ~130 è¡Œ | âœ… |
| P1-T3 | ä¼˜åŒ– RecentTasks æœ€è¿‘ä»»åŠ¡ç»„ä»¶ | 1 | ~10 è¡Œ | âœ… |
| P1-T4 | åˆ›å»º TrendChart è¶‹åŠ¿å›¾è¡¨ç»„ä»¶ | 2 | ~220 è¡Œ | âœ… |
| P1-T5 | åˆ›å»º useDashboardStats Hook | 1 | ~125 è¡Œ | âœ… |
| P1-T6 | é‡æ„å·¥ä½œå°é¡µé¢é›†æˆæ‰€æœ‰ç»„ä»¶ | 1 | ~110 è¡Œ | âœ… |
| P1-T7 | è¶‹åŠ¿å›¾è¡¨å¢å¼ºï¼šå¤šæ—¶é—´æ®µ+è‡ªå®šä¹‰èŒƒå›´ | 5 | ~50 è¡Œ | âœ… |

---

## P1-T1: åˆ›å»º StatCard ç»Ÿè®¡å¡ç‰‡ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºå¯å¤ç”¨çš„ç»Ÿè®¡å¡ç‰‡ç»„ä»¶ï¼Œæ”¯æŒå›¾æ ‡ã€æ•°å€¼ã€è¶‹åŠ¿ã€å¯¹æ¯”æ•°æ®å±•ç¤º

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/dashboard/StatCard.tsx` (æ–°å¢)
- `apps/web/src/components/dashboard/index.ts` (æ›´æ–°å¯¼å‡º)

### ç»„ä»¶æ¥å£
```typescript
type StatCardProps = {
  icon: ReactNode;
  title: string;
  value: number | string;
  trend?: {
    value: number;
    type: 'up' | 'down';
    period: string; // "æœ¬å‘¨" | "è¾ƒä¸Šå‘¨"
  };
  iconBgColor?: string;      // æ¸å˜èµ·å§‹è‰²
  iconBgColorEnd?: string;   // æ¸å˜ç»“æŸè‰²
  onClick?: () => void;
  loading?: boolean;
}
```

### è§†è§‰è§„æ ¼
- å¡ç‰‡åœ†è§’: 8px
- å†…è¾¹è·: 20px 24px
- å›¾æ ‡å®¹å™¨: 48x48, åœ†è§’ 8px, æ¸å˜èƒŒæ™¯
- æ•°å€¼å­—å·: 28px, font-weight: 600
- è¶‹åŠ¿å­—å·: 12px
- hover æ•ˆæœ: translateY(-2px), box-shadow å¢å¼º

### éªŒæ”¶æ ‡å‡†
- [x] ç»„ä»¶å¯ç‹¬ç«‹æ¸²æŸ“
- [x] æ”¯æŒ loading çŠ¶æ€
- [x] hover åŠ¨æ•ˆæµç•…
- [x] è¶‹åŠ¿ç®­å¤´é¢œè‰²æ­£ç¡®

---

## P1-T2: åˆ›å»º QuickStart å¿«é€Ÿå¼€å§‹ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºå¿«é€Ÿå¼€å§‹åŒºåŸŸç»„ä»¶ï¼ŒåŒ…å«ä¸»æ“ä½œæŒ‰é’®å’Œæ¬¡è¦å¿«æ·å…¥å£

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/dashboard/QuickStart.tsx` (æ–°å¢)
- `apps/web/src/components/dashboard/index.ts` (æ›´æ–°å¯¼å‡º)

### ç»„ä»¶æ¥å£
```typescript
type QuickStartProps = {
  onNewTask?: () => void;
  onNewPrompt?: () => void;
  onUploadDataset?: () => void;
  onAddModel?: () => void;
  onConfigEvaluator?: () => void;
}
```

### å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš€ å¿«é€Ÿå¼€å§‹                           â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  + æ–°å»ºæµ‹è¯•ä»»åŠ¡                  â”‚  â”‚  â† ä¸»æŒ‰é’® (æ¸å˜èƒŒæ™¯)
â”‚ â”‚    é€‰æ‹©æç¤ºè¯ã€æ¨¡å‹ã€æ•°æ®é›†       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â† æ¬¡è¦æŒ‰é’® (æè¾¹) 2x2ç½‘æ ¼
â”‚ â”‚ ğŸ“ æ–°å»ºæç¤ºè¯â”‚ â”‚ ğŸ“Š ä¸Šä¼ æ•°æ®é›†â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ ğŸ”§ æ·»åŠ æ¨¡å‹ â”‚ â”‚ âš™ï¸ é…ç½®è¯„ä¼°å™¨â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éªŒæ”¶æ ‡å‡†
- [x] ä¸»æŒ‰é’®ä½¿ç”¨æ¸å˜èƒŒæ™¯
- [x] æ¬¡è¦æŒ‰é’®ä½¿ç”¨æè¾¹æ ·å¼
- [x] æŒ‰é’®ç‚¹å‡»è§¦å‘å¯¹åº”å›è°ƒ
- [x] å“åº”å¼å¸ƒå±€é€‚é…

---

## P1-T3: ä¼˜åŒ– RecentTasks æœ€è¿‘ä»»åŠ¡ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
ä¼˜åŒ–æœ€è¿‘ä»»åŠ¡åˆ—è¡¨ç»„ä»¶çš„ç©ºçŠ¶æ€è®¾è®¡

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/dashboard/RecentTasks.tsx` (ä¿®æ”¹)

### ç©ºçŠ¶æ€è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ“                     â”‚
â”‚   æš‚æ— æµ‹è¯•ä»»åŠ¡                 â”‚
â”‚   åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡å§     â”‚
â”‚   [+ åˆ›å»ºä»»åŠ¡] (æ¸å˜æŒ‰é’®)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éªŒæ”¶æ ‡å‡†
- [x] ç©ºçŠ¶æ€æœ‰å¼•å¯¼æ–‡æ¡ˆ
- [x] ç©ºçŠ¶æ€æŒ‰é’®ä½¿ç”¨æ¸å˜æ ·å¼
- [x] ç‚¹å‡»å¯è·³è½¬åˆ›å»ºä»»åŠ¡

---

## P1-T4: åˆ›å»º TrendChart è¶‹åŠ¿å›¾è¡¨ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºæ‰§è¡Œè¶‹åŠ¿å›¾è¡¨ç»„ä»¶ï¼ŒåŸºäº Recharts å®ç°æŠ˜çº¿å›¾

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/dashboard/TrendChart.tsx` (æ–°å¢)
- `apps/web/src/components/dashboard/index.ts` (æ›´æ–°å¯¼å‡º)

### ä¾èµ–å®‰è£…
```bash
pnpm add recharts
```

### ç»„ä»¶æ¥å£
```typescript
type TimeRangeType = '7d' | '14d' | '30d' | '60d' | 'custom'

type TrendDataPoint = {
  date: string;       // "12/01"
  executed: number;   // æ‰§è¡Œæ•°
  passed: number;     // é€šè¿‡æ•°
  failed: number;     // å¤±è´¥æ•°
}

type TrendChartProps = {
  data: TrendDataPoint[];
  timeRange: TimeRangeType;
  onTimeRangeChange?: (range: TimeRangeType, customRange?: [string, string]) => void;
  loading?: boolean;
  height?: number;
}
```

### å›¾è¡¨é…ç½®
- æŠ˜çº¿é¢œè‰²ï¼šæ‰§è¡Œ(#1677FF)ã€é€šè¿‡(#52C41A)ã€å¤±è´¥(#FF4D4F)
- Xè½´ï¼šæ—¥æœŸ
- Yè½´ï¼šæ•°é‡
- æ‚¬æµ®æç¤ºï¼šæ˜¾ç¤ºè¯¦ç»†æ•°æ®
- å›¾ä¾‹ï¼šåº•éƒ¨å±…ä¸­
- æ—¶é—´èŒƒå›´ï¼š7å¤© | 14å¤© | 30å¤© | 60å¤© | è‡ªå®šä¹‰

### éªŒæ”¶æ ‡å‡†
- [x] å›¾è¡¨æ­£ç¡®æ¸²æŸ“ä¸‰æ¡æŠ˜çº¿
- [x] æ—¶é—´èŒƒå›´åˆ‡æ¢æ­£å¸¸ï¼ˆ5ä¸ªé€‰é¡¹ï¼‰
- [x] è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´é€‰æ‹©ï¼ˆæœ€å¤§60å¤©ï¼‰
- [x] æ‚¬æµ®æç¤ºæ˜¾ç¤ºè¯¦æƒ…
- [x] å“åº”å¼å®½åº¦é€‚é…

---

## P1-T5: åˆ›å»º useDashboardStats Hook âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºå·¥ä½œå°ç»Ÿè®¡æ•°æ® Hookï¼Œå°è£… API è°ƒç”¨å’Œæ•°æ®å¤„ç†

### æ–‡ä»¶æ¸…å•
- `apps/web/src/hooks/useDashboardStats.ts` (æ–°å¢)

### Hook æ¥å£
```typescript
type TimeRangeType = '7d' | '14d' | '30d' | '60d' | 'custom'

type UseDashboardStatsReturn = {
  // æ¦‚è§ˆæ•°æ®
  promptCount: number;
  datasetCount: number;
  weeklyTaskCount: number;
  passRate: number | null;
  totalCost: number;
  totalTokens: number;

  // è¶‹åŠ¿æ•°æ®
  trendData: TrendDataPoint[];
  trendSummary: TrendSummary | undefined;

  // æœ€è¿‘ä»»åŠ¡
  recentTasks: TaskListItem[];

  // çŠ¶æ€
  loading: boolean;
  overviewLoading: boolean;
  trendsLoading: boolean;
  recentTasksLoading: boolean;
  error: Error | null;

  // æ“ä½œ
  timeRange: TimeRangeType;
  setTimeRange: (range: TimeRangeType, customRange?: [string, string]) => void;
  refresh: () => void;
}
```

### API è°ƒç”¨
```typescript
// ç»Ÿè®¡æ•°æ®
GET /api/v1/stats/overview

// è¶‹åŠ¿æ•°æ®
GET /api/v1/stats/trends?range=7d
GET /api/v1/stats/trends?range=custom&start=2024-01-01&end=2024-01-15
```

### éªŒæ”¶æ ‡å‡†
- [x] æ•°æ®æ­£ç¡®è·å–å’Œè§£æ
- [x] loading çŠ¶æ€æ­£ç¡®
- [x] é”™è¯¯å¤„ç†å®Œå–„
- [x] æ—¶é—´èŒƒå›´åˆ‡æ¢è§¦å‘é‡æ–°è¯·æ±‚
- [x] æ”¯æŒè‡ªå®šä¹‰æ—¥æœŸèŒƒå›´

---

## P1-T6: é‡æ„å·¥ä½œå°é¡µé¢é›†æˆæ‰€æœ‰ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
é‡æ„å·¥ä½œå°é¡µé¢ï¼Œé›†æˆæ‰€æœ‰æ–°ç»„ä»¶ï¼Œæ›¿æ¢åŸæœ‰å®ç°

### æ–‡ä»¶æ¸…å•
- `apps/web/src/app/(dashboard)/page.tsx` (ä¿®æ”¹)

### é¡µé¢ç»“æ„
```tsx
export default function DashboardPage() {
  const {
    promptCount, datasetCount, weeklyTaskCount, passRate,
    trendData, timeRange, setTimeRange,
    overviewLoading, trendsLoading
  } = useDashboardStats();
  const router = useRouter();

  return (
    <div>
      {/* ç»Ÿè®¡å¡ç‰‡è¡Œ - 4åˆ— */}
      <Row gutter={[16, 16]}>
        <Col xs={24} sm={12} lg={6}><StatCard ... /></Col>
        <Col xs={24} sm={12} lg={6}><StatCard ... /></Col>
        <Col xs={24} sm={12} lg={6}><StatCard ... /></Col>
        <Col xs={24} sm={12} lg={6}><StatCard ... /></Col>
      </Row>

      {/* å¿«é€Ÿå¼€å§‹ + æœ€è¿‘ä»»åŠ¡ */}
      <Row gutter={[16, 16]} className="mt-4">
        <Col xs={24} lg={10}><QuickStart /></Col>
        <Col xs={24} lg={14}><RecentTasks /></Col>
      </Row>

      {/* è¶‹åŠ¿å›¾è¡¨ */}
      <div className="mt-4">
        <TrendChart
          data={trendData}
          timeRange={timeRange}
          onTimeRangeChange={setTimeRange}
          loading={trendsLoading}
        />
      </div>
    </div>
  );
}
```

### éªŒæ”¶æ ‡å‡†
- [x] é¡µé¢å¸ƒå±€ç¬¦åˆè®¾è®¡ç¨¿
- [x] æ‰€æœ‰ç»„ä»¶æ­£ç¡®æ¸²æŸ“
- [x] è·¯ç”±è·³è½¬æ­£å¸¸
- [x] åŠ è½½çŠ¶æ€å±•ç¤ºæ­£ç¡®

---

## P1-T7: è¶‹åŠ¿å›¾è¡¨å¢å¼º - å¤šæ—¶é—´æ®µ+è‡ªå®šä¹‰èŒƒå›´ âœ…

### ä»»åŠ¡æè¿°
å¢å¼ºè¶‹åŠ¿å›¾è¡¨æ”¯æŒæ›´å¤šé¢„è®¾æ—¶é—´æ®µå’Œè‡ªå®šä¹‰æ—¥æœŸèŒƒå›´é€‰æ‹©

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/dashboard/TrendChart.tsx` (ä¿®æ”¹)
- `apps/web/src/hooks/useDashboardStats.ts` (ä¿®æ”¹)
- `apps/web/src/services/stats.ts` (ä¿®æ”¹)
- `apps/web/src/app/api/v1/stats/trends/route.ts` (ä¿®æ”¹)
- `apps/web/src/lib/metrics/aggregator.ts` (ä¿®æ”¹)
- `packages/shared/src/types/monitor.ts` (ä¿®æ”¹)

### åŠŸèƒ½è¯´æ˜
- æ—¶é—´èŒƒå›´é€‰é¡¹ï¼š7å¤© | 14å¤© | 30å¤© | 60å¤© | è‡ªå®šä¹‰
- è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´ï¼šé€‰æ‹©èµ·æ­¢æ—¥æœŸï¼Œæœ€å¤§è·¨åº¦60å¤©
- æ—¥æœŸé€‰æ‹©å™¨åœ¨é€‰æ‹©"è‡ªå®šä¹‰"åæ˜¾ç¤º

### éªŒæ”¶æ ‡å‡†
- [x] 5ä¸ªé¢„è®¾æ—¶é—´æ®µå¯åˆ‡æ¢
- [x] è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨
- [x] æœ€å¤§60å¤©é™åˆ¶
- [x] API æ”¯æŒæ–°æ—¶é—´èŒƒå›´

---

## å¼€å‘æ—¥å¿—

| æ—¥æœŸ | ä»»åŠ¡ | å®Œæˆæƒ…å†µ | å¤‡æ³¨ |
|------|------|---------|------|
| 2024-12-04 | P1-T1 | âœ… | åˆ›å»º StatCard ç»„ä»¶ï¼Œæ”¯æŒæ¸å˜å›¾æ ‡ã€hoveråŠ¨æ•ˆ |
| 2024-12-04 | P1-T2 | âœ… | åˆ›å»º QuickStart ç»„ä»¶ï¼Œæ¸å˜ä¸»æŒ‰é’®+2x2ç½‘æ ¼æ¬¡è¦æŒ‰é’® |
| 2024-12-04 | P1-T3 | âœ… | ä¼˜åŒ– RecentTasks ç©ºçŠ¶æ€è®¾è®¡ |
| 2024-12-04 | P1-T4 | âœ… | åˆ›å»º TrendChart ç»„ä»¶ï¼ŒåŸºäº Recharts |
| 2024-12-04 | P1-T5 | âœ… | åˆ›å»º useDashboardStats Hook |
| 2024-12-04 | P1-T6 | âœ… | é‡æ„å·¥ä½œå°é¡µé¢ï¼Œé›†æˆæ‰€æœ‰æ–°ç»„ä»¶ |
| 2024-12-04 | P1-T7 | âœ… | è¶‹åŠ¿å›¾è¡¨å¢å¼ºï¼šæ”¯æŒ 7/14/30/60å¤© + è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´(æœ€å¤§60å¤©) |

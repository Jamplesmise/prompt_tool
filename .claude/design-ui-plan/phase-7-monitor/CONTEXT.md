# Phase 7: 监控中心数据可视化

## 阶段概述

**目标**：优化监控中心页面，增强数据可视化能力和告警展示

**优先级**：P2

**前置依赖**：Phase 1 的趋势图表组件可复用

**涉及页面**：`/monitor` (监控中心)

## 当前问题

1. 时间范围选择器位置合理，但主区域为空时布局不协调
2. 活跃告警卡片与主区域关系不清
3. 缺少模型性能对比图表
4. 趋势图表不够丰富

## 优化目标

### 数据可视化增强
- 执行概览统计卡片
- 模型性能对比表格
- 通过率趋势图表
- 执行趋势图表

### 告警展示优化
- 活跃告警卡片醒目
- 告警级别颜色区分
- 快速跳转详情

## 设计规范

### 页面布局
```
┌─────────────────────────────────────────────────────────────────────────┐
│  🎯 监控中心                                [24h] [7天] [30天] [自定义]  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌──────────────────────────────────────────┐  ┌────────────────────┐   │
│  │ 📊 执行概览                               │  │ 🔔 活跃告警       │   │
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │ ━━━━━━━━━━━━━━━━ │   │
│  │                                          │  │                    │   │
│  │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐ │  │  🔴 通过率低于阈值│   │
│  │  │ 256  │  │ 231  │  │ 25   │  │90.2% │ │  │  分类模型评估     │   │
│  │  │ 执行 │  │ 成功 │  │ 失败 │  │通过率│ │  │  5分钟前          │   │
│  │  └──────┘  └──────┘  └──────┘  └──────┘ │  │  ─────────────────│   │
│  │                                          │  │  🟡 响应时间告警  │   │
│  │  ┌──────────────────────────────────┐   │  │  GPT-4 API       │   │
│  │  │     执行趋势 (迷你折线图)         │   │  │  1小时前         │   │
│  │  └──────────────────────────────────┘   │  │                  │   │
│  │                                          │  │ [查看全部 →]     │   │
│  └──────────────────────────────────────────┘  └────────────────────┘   │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ 📈 模型性能对比                                                   │  │
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │  │
│  │                                                                   │  │
│  │  模型            │ 调用次数 │ 成功率 │ 平均延迟 │ 通过率 │ Token  │  │
│  │  ─────────────────────────────────────────────────────────────── │  │
│  │  GPT-4o          │ 1,234   │ 99.8% │ 1.2s    │ 94.5% │ 45.2K  │  │
│  │  GPT-4o-mini     │ 2,567   │ 99.9% │ 0.8s    │ 89.2% │ 82.1K  │  │
│  │  Claude-3.5      │ 890     │ 99.5% │ 1.5s    │ 92.1% │ 35.8K  │  │
│  │                                                                   │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ 📊 通过率趋势                                        [展开查看]   │  │
│  │                                                                   │  │
│  │  100% ┤ ╭───────────╮                  ╭─────────╮               │  │
│  │   90% ┤─╯           ╰──────────────────╯         ╰───            │  │
│  │   80% ┤                                                          │  │
│  │   70% ┤                                                          │  │
│  │       └──────────────────────────────────────────────────────    │  │
│  │                                                                   │  │
│  │  ● GPT-4o  ● GPT-4o-mini  ● Claude-3.5                           │  │
│  │                                                                   │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 告警级别颜色
| 级别 | 颜色 | 图标 |
|------|------|------|
| 严重 (Critical) | #FF4D4F | 🔴 |
| 警告 (Warning) | #FAAD14 | 🟡 |
| 信息 (Info) | #1677FF | 🔵 |

### 时间范围选择器
```
[24h] [7天] [30天] [自定义]
         ━━━━
         选中态: 背景高亮 + 边框
```

## 涉及文件

```
apps/web/src/
├── app/(dashboard)/monitor/page.tsx        # 监控中心页面
├── components/monitor/
│   ├── MonitorOverview.tsx                 # 执行概览组件 (新增)
│   ├── ActiveAlerts.tsx                    # 活跃告警组件 (新增)
│   ├── ModelPerformanceTable.tsx           # 模型性能表格 (新增)
│   ├── PassRateTrendChart.tsx              # 通过率趋势图 (新增)
│   ├── TimeRangeSelector.tsx               # 时间范围选择器 (新增)
│   └── index.ts
└── hooks/
    └── useMonitorStats.ts                  # 监控统计 Hook (新增)
```

## API 依赖

复用/新增接口：
- `GET /api/v1/monitor/overview?range=24h` - 执行概览
- `GET /api/v1/monitor/models?range=24h` - 模型性能
- `GET /api/v1/monitor/trend?range=7d` - 趋势数据
- `GET /api/v1/alerts/active` - 活跃告警

## 验收标准

### 功能
- [ ] 时间范围切换正常
- [ ] 数据统计正确
- [ ] 图表渲染正确
- [ ] 告警跳转正常

### 视觉
- [ ] 布局协调
- [ ] 告警级别颜色正确
- [ ] 图表样式一致

### 性能
- [ ] 图表渲染流畅
- [ ] 数据加载快速

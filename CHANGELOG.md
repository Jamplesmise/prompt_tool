# Changelog

本文件记录项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)。

---

## [3.0.0] - 2024-12-13

### 🚀 主版本升级

这是一个重大版本升级，包含框架升级和 GOI 智能系统全面完成。

### 框架升级

- **Next.js 15** - 升级至最新 Next.js 版本
- **React 19** - 升级至 React 19，支持新特性
- **Prisma 6** - 数据库 ORM 升级
- **Playwright** - 新增 E2E 测试框架

### GOI L1/L2 智能系统完成

GOI (Guided Operation Intelligence) 系统全面完成，达到 L2 智能水平。

#### L1 能力（意图理解）
- 所有 20+ 资源类型支持
- 意图识别准确率 > 95%
- 模糊匹配和实体识别
- 用户友好的 TODO 展示

#### L2 能力（多步规划）
- 多步骤任务规划（自然语言 → 执行计划）
- 操作可视化（TODO List 实时状态）
- 检查点机制（资源选择/参数确认/操作确认）
- 暂停续跑（三种协作模式：手动/辅助/自动）
- 接管交还（用户随时控制）
- 人工操作感知（追踪用户操作）

### 测试覆盖

- **单元测试**：GOI 核心模块全覆盖
- **API 测试**：28 个 GOI API 端点测试通过
- **E2E 测试**：17 个 L2 验证场景全部通过
  - 完整任务执行
  - 暂停续跑
  - 接管交还
  - 检查点确认
  - 性能测试
  - 稳定性测试

### 文档更新

- `docs/goi-l1-upgrade/` - L1 升级完整文档
- `docs/goi-l2-upgrade/` - L2 升级完整文档
- `docs/goi-intelligence-roadmap.md` - 智能等级路线图
- `docs/goi-best-practices.md` - GOI 开发最佳实践

---

## [2.7.0] - 2024-12-13

### GOI L2 智能升级

GOI (Guided Operation Intelligence) 系统升级至 L2 级别，实现 AI 辅助操作的完整能力。

#### 新功能

- **多步骤任务规划**：AI 可以将自然语言目标分解为多步骤执行计划
  - 用户输入 "创建一个情感分析任务" → 自动生成 TODO List
  - 支持步骤依赖关系和预估时间

- **操作可视化**：实时显示 AI 操作过程
  - TODO List 面板展示当前计划和进度
  - 步骤状态实时更新（待执行/执行中/已完成）

- **检查点确认机制**：关键决策点用户可确认
  - 资源选择检查点（选择提示词、数据集等）
  - 参数确认检查点（任务配置等）
  - 操作确认检查点（提交、删除等）

- **暂停与接管**：用户随时控制执行流程
  - 三种协作模式：手动 / 辅助 / 自动
  - 随时暂停 AI 操作
  - 接管后可手动完成步骤

- **人工操作感知**：AI 识别用户手动操作
  - 追踪用户点击、导航、表单提交等操作
  - 自动标记用户已完成的步骤
  - 生成续跑建议

- **断点续跑**：暂停后可从当前位置继续
  - 保持计划状态和进度
  - 支持模式切换后恢复执行

#### 新增组件

- `GoiCopilot` - Copilot 面板主组件
- `TodoListPanel` - TODO List 可视化面板
- `CheckpointDialog` - 检查点确认对话框
- `ModeSwitch` - 协作模式切换器

#### 新增 API

- `POST /api/goi/plan` - 生成任务计划
- `POST /api/goi/execute` - 执行计划步骤
- `POST /api/goi/checkpoint/respond` - 响应检查点

#### 配置

- 环境变量 `NEXT_PUBLIC_GOI_ENABLED` - 启用/禁用 GOI
- 环境变量 `NEXT_PUBLIC_GOI_LEVEL` - 设置智能等级 (L1/L2)

### 改进

- 提升 GOI 系统稳定性和响应速度
- 优化 Copilot 面板交互体验
- 完善操作追踪准确性

### 测试

- 新增 GOI 核心模块单元测试（planner, actionTracker, planReconciler, deviationDetector）
- 新增 L2 验证 E2E 测试（完整任务执行、暂停续跑、接管交还、检查点确认）
- 新增性能测试（计划生成时间、模式切换响应）
- 新增稳定性测试（连续任务、快速模式切换）

### 文档

- 更新 `docs/goi-intelligence-roadmap.md` - 智能等级路线图
- 新增 `docs/goi-best-practices.md` - GOI 开发最佳实践
- 更新 `CLAUDE.md` - 添加 GOI L2 完成状态

---

## [2.6.0] - 2024-12-10

### 统一编辑器组件重构

- 重构提示词编辑器，统一代码风格
- 优化编辑器性能和用户体验

---

## [2.5.0] - 2024-12

### 结构化评估升级

- InputSchema/OutputSchema 结构化定义
- 字段级评估引擎 + 多种聚合策略
- AI 配置助手（对话式 Schema 生成）
- Schema 模板库 + 从输出推断
- 字段级统计分析 + 回归检测
- 结果导出增强（多 Sheet Excel）

---

## [2.4.0] - 2024-12

### FastGPT 模型集成

- FastGPT 模型配置集成（MongoDB 直连）
- 模型管理前端优化
- 多模型类型支持（LLM/Embedding/TTS/STT/Rerank）

---

## [2.3.0] - 2024-11

### 版本管理增强

- 提示词分支管理（实验分支）
- 数据集版本管理（快照、回滚、Diff）

---

## [2.2.0] - 2024-11

### 项目管理

- 多团队隔离
- 成员管理（RBAC 权限）
- API Token
- 操作日志（审计）
- 系统设置页面

---

## [2.1.0] - 2024-10

### 监控告警

- 定时任务（Cron 表达式）
- 监控中心（趋势图表）
- 告警规则（阈值触发）
- 通知渠道（邮件/Webhook）

---

## [2.0.0] - 2024-10

### A/B 测试与高级评估

- LLM 评估器
- 组合评估器
- A/B 测试
- 断点续跑（任务暂停/恢复）
- 成本计算

---

## [1.0.0] - 2024-09

### MVP 发布

- 用户认证
- 提示词 CRUD + 版本
- 数据集上传预览
- 模型配置
- 基础测试执行
- 预置评估器 + Node.js 代码评估器
- 结果查看导出
- 工作台统计

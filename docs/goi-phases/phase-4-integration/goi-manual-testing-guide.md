# GOI 手动测试指南

> 本文档提供 GOI (Goal-Oriented Intelligence) 功能的手动测试步骤

## 测试前准备

1. 确保服务已启动：`pnpm dev`
2. 访问：`http://localhost:3000`
3. 使用测试账号登录：
   - 邮箱：`admin@example.com`
   - 密码：`admin123`
4. 如果出现欢迎引导弹窗，点击「跳过引导」

---

## 场景 A：基础功能测试

### A1: Copilot 面板打开和关闭

**步骤：**
1. 进入「测试任务」页面 (`/tasks`)
2. 找到页面右下角的 Copilot 浮动按钮（机器人图标）
3. 点击按钮打开 Copilot 面板
4. 验证面板正常显示
5. 按 `ESC` 键或点击面板外部关闭面板
6. 重复打开/关闭 3-5 次

**预期结果：**
- 面板能正常打开和关闭
- 无卡顿或异常

---

### A2: 模式切换

**步骤：**
1. 打开 Copilot 面板
2. 找到顶部的模式选择器（三个选项按钮）
3. 依次点击：
   - 「手动模式」- AI 只提供建议
   - 「协助模式」- AI 执行需人工确认
   - 「自动模式」- AI 自主执行

**预期结果：**
- 每个模式切换后，按钮状态正确高亮
- 模式说明文字正确显示

---

### A3: 简单目标输入

**步骤：**
1. 打开 Copilot 面板
2. 选择「协助模式」
3. 在输入框中输入：`查看所有提示词`
4. 点击发送按钮

**预期结果：**
- 系统开始处理目标
- TODO List 出现（如果有任务分解）
- 系统有响应反馈

---

## 场景 B：人机协作测试

### B1: 检查点确认

**步骤：**
1. 选择「协助模式」
2. 输入目标：`创建一个新的测试提示词`
3. 等待系统生成 TODO List
4. 当出现检查点弹窗时，点击「确认」

**预期结果：**
- 检查点弹窗正确显示
- 点击确认后，任务继续执行

---

### B2: 检查点修改

**步骤：**
1. 选择「协助模式」
2. 输入目标：`分析当前数据集`
3. 等待检查点弹窗
4. 点击「修改」并输入修改意见
5. 提交修改

**预期结果：**
- 修改输入框出现
- AI 根据修改意见调整执行

---

### B3: 检查点接管

**步骤：**
1. 选择「协助模式」
2. 输入任意目标
3. 等待检查点
4. 点击「接管」

**预期结果：**
- 系统切换为手动模式
- 用户可以手动控制后续步骤

---

### B4: 检查点拒绝

**步骤：**
1. 选择「协助模式」
2. 输入目标
3. 等待检查点
4. 点击「拒绝」

**预期结果：**
- 当前步骤被取消
- 系统停止执行或提供替代方案

---

## 场景 C：故障恢复测试

### C1: API 调用失败重试

**步骤：**
1. 打开浏览器开发者工具 (F12)
2. 切换到「Network」标签
3. 开启「Offline」模式模拟断网
4. 执行一个目标任务
5. 观察错误提示
6. 关闭「Offline」模式
7. 观察是否自动重试

**预期结果：**
- 断网时显示友好的错误提示
- 恢复网络后系统能继续工作

---

### C2: 上下文溢出处理

**步骤：**
1. 连续执行多个复杂目标（5-10 个）
2. 观察上下文指示器（如果有）

**预期结果：**
- 系统能处理长对话
- 不会因上下文过长崩溃

---

## 场景 D：边界条件测试

### D1: 超长输入

**步骤：**
1. 在输入框中粘贴一段超长文本（约 1000 字符）
2. 点击发送

**预期结果：**
- 系统能处理或优雅截断
- 不会崩溃或卡死

---

### D2: 特殊字符输入

**步骤：**
1. 输入包含特殊字符的目标：
   ```
   测试 <script>alert("xss")</script> & "引号" '单引号'
   ```
2. 发送并观察

**预期结果：**
- 特殊字符被正确转义
- 不会触发 XSS
- 页面正常显示

---

### D3: 空输入

**步骤：**
1. 不输入任何内容
2. 点击发送按钮

**预期结果：**
- 发送按钮应该被禁用
- 或显示提示要求输入内容

---

### D4: 快速连续操作

**步骤：**
1. 快速连续点击发送按钮多次
2. 快速切换模式 5-10 次

**预期结果：**
- 系统响应稳定
- 不会出现状态混乱

---

## 测试完成检查清单

| 场景 | 通过 | 备注 |
|------|------|------|
| A1: 面板打开关闭 | ☐ | |
| A2: 模式切换 | ☐ | |
| A3: 简单目标输入 | ☐ | |
| B1: 检查点确认 | ☐ | |
| B2: 检查点修改 | ☐ | |
| B3: 检查点接管 | ☐ | |
| B4: 检查点拒绝 | ☐ | |
| C1: 故障重试 | ☐ | |
| C2: 上下文处理 | ☐ | |
| D1: 超长输入 | ☐ | |
| D2: 特殊字符 | ☐ | |
| D3: 空输入 | ☐ | |
| D4: 快速操作 | ☐ | |

---

## 问题反馈模板

如发现问题，请记录：

```
【问题标题】：
【测试场景】：
【复现步骤】：
1.
2.
3.

【预期结果】：
【实际结果】：
【浏览器/环境】：
【截图】：
```

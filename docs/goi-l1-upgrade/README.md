# GOI L1 智能水平提升计划

> 目标：让 GOI 系统在所有资源类型上达到 L1 智能水平

## 背景

### 当前状态评估

| 维度 | 现状 | 问题 |
|------|------|------|
| 智能等级 | L0.5 | 只支持部分资源，大量操作返回"不支持" |
| 资源覆盖 | ~30% | 8/20+ 资源类型有 State 支持 |
| 弹窗集成 | ~5% | 页面几乎没有集成 GOI 监听 |
| 端到端测试 | 0% | 没有任何验证 |

### L1 智能水平定义

**L1 = 能理解模糊意图**（类比搜索引擎）

达标标准：
1. **意图识别准确率 > 95%** - 单一明确意图
2. **实体识别准确率 > 90%** - prompt名称、数据集、模型等
3. **模糊匹配能力** - 支持别名、同义词、部分匹配
4. **主动澄清** - 意图不明确时追问而非猜测

---

## 分阶段计划

| 阶段 | 名称 | 目标 | 预估工作量 |
|------|------|------|-----------|
| Phase 1 | 基础设施补全 | 补全核心配置文件和常量 | 1 天 |
| Phase 2 | 资源类型全覆盖 | 所有资源类型支持 Access/State/Observation | 2-3 天 |
| Phase 3 | 意图理解增强 | 模糊匹配、实体识别、意图分类 | 2 天 |
| Phase 4 | 计划展示优化 | 用户可读的 TODO 列表 | 1 天 |
| Phase 5 | 验证与修复 | 端到端测试、问题修复 | 1-2 天 |

**总计**：7-9 天

---

## 目录结构

```
docs/goi-l1-upgrade/
├── README.md                    # 本文件
├── phase-1-foundation/          # 阶段1：基础设施补全
│   ├── CONTEXT.md
│   └── TASKS.md
├── phase-2-resource-coverage/   # 阶段2：资源类型全覆盖
│   ├── CONTEXT.md
│   └── TASKS.md
├── phase-3-intent-understanding/# 阶段3：意图理解增强
│   ├── CONTEXT.md
│   └── TASKS.md
├── phase-4-plan-display/        # 阶段4：计划展示优化
│   ├── CONTEXT.md
│   └── TASKS.md
└── phase-5-validation/          # 阶段5：验证与修复
    ├── CONTEXT.md
    └── TASKS.md
```

---

## 关键里程碑

| 里程碑 | 验收标准 | 依赖阶段 |
|--------|---------|---------|
| M1 | 所有资源类型在 shared.ts 中有别名映射 | Phase 1 |
| M2 | 所有资源类型支持 Access 操作（导航/创建弹窗） | Phase 2 |
| M3 | 所有资源类型支持 State 操作（CRUD） | Phase 2 |
| M4 | 用户输入"帮我创建xxx"能正确识别资源类型 | Phase 3 |
| M5 | TODO 列表使用自然语言，非技术术语 | Phase 4 |
| M6 | 10 个核心场景端到端测试通过 | Phase 5 |

---

## 技术决策

### 1. 资源类型完整列表（20种）

**核心资源**（已部分支持）：
- `prompt` - 提示词
- `dataset` - 数据集
- `model` - 模型
- `evaluator` - 评估器
- `task` - 测试任务

**衍生资源**（需新增）：
- `prompt_version` - 提示词版本
- `prompt_branch` - 提示词分支
- `dataset_version` - 数据集版本
- `provider` - 模型供应商

**系统资源**（需新增）：
- `scheduled_task` - 定时任务
- `alert_rule` - 告警规则
- `notify_channel` - 通知渠道
- `input_schema` - 输入 Schema
- `output_schema` - 输出 Schema

**页面资源**（导航用）：
- `settings` - 设置
- `dashboard` - 仪表盘
- `monitor` - 监控中心
- `comparison` - 对比分析

### 2. 不修改现有 API

GOI 系统是装饰层，不改变底层 API。所有操作通过：
- 导航到页面
- 打开弹窗
- 调用现有 API

### 3. 遵循 MVU 原则

每个任务：
- 单次改动 < 5 文件
- 单次代码 < 200 行
- 可独立验证

---

## 风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|-------|------|---------|
| 弹窗 ID 与页面不匹配 | 高 | 中 | 统一在 dialogIds.ts 管理 |
| State 操作缺少必要字段 | 中 | 高 | 参考 Prisma Schema 补全 |
| 意图理解误判 | 高 | 中 | 低置信度时主动追问 |

---

## 成功标准

完成本计划后，用户应该能够：

```
用户: "帮我创建一个情感分析的提示词"
AI: "好的，我来帮你创建提示词。

     📋 创建提示词
     ▸ 准备 [1步]
       ☐ 打开提示词创建页面
     ▸ 配置 [待你填写]
       ○ 填写提示词名称和内容

     正在打开创建页面..."

(系统导航到 /prompts/new)
```

```
用户: "打开模型配置"
AI: "正在导航到模型配置页面..."

(系统导航到 /models)
```

```
用户: "用GPT4测一下"
AI: "我理解你想创建测试任务。请确认：
     - 模型：检测到2个包含'GPT4'的模型
       1. gpt-4-turbo (OpenAI)
       2. gpt-4-vision (OpenAI)
     - 请问使用哪一个？
     - 提示词和数据集还未指定，需要你选择"
```

---

## 开发日志

| 日期 | 阶段 | 完成内容 | 负责人 |
|------|------|---------|-------|
| - | - | - | - |

---

*文档版本：v1.0*
*创建日期：2024-12*

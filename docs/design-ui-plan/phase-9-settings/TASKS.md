# Phase 9: è®¾ç½®é¡µé¢é‡æ„ - ä»»åŠ¡æ¸…å•

## ä»»åŠ¡æ¦‚è§ˆ

> **è®¾è®¡å˜æ›´**: åŸè®¡åˆ’é‡‡ç”¨å·¦ä¾§èœå• + å¤šå­é¡µé¢çš„å¸ƒå±€ï¼Œç»ç”¨æˆ·åé¦ˆåæ”¹ä¸ºå•é¡µé¢æŠ˜å é¢æ¿ï¼ˆCollapseï¼‰å½¢å¼ï¼Œæ›´åŠ ç´§å‡‘ç›´è§‚ã€‚

| ä»»åŠ¡ ID | ä»»åŠ¡åç§° | æ”¹åŠ¨æ–‡ä»¶æ•° | ä»£ç é‡ | çŠ¶æ€ |
|---------|----------|-----------|--------|------|
| P9-T1 | åˆ›å»º SaveButton ä¿å­˜æŒ‰é’®ç»„ä»¶ | 1 | ~60 è¡Œ | âœ… |
| P9-T2 | åˆ›å»º SettingsCard è®¾ç½®å¡ç‰‡ç»„ä»¶ | 2 | ~50 è¡Œ | âœ… |
| P9-T3 | åˆ›å»º useSettingsForm Hook | 1 | ~80 è¡Œ | âœ… |
| P9-T4 | åˆ›å»ºå…¨å±€è®¾ç½® Store | 1 | ~20 è¡Œ | âœ… |
| P9-T5 | é‡æ„è®¾ç½®é¡µé¢ä¸ºå•é¡µæŠ˜å é¢æ¿ | 3 | ~780 è¡Œ | âœ… |
| P9-T6 | ä¼˜åŒ–å¸ƒå±€å’Œå­—ä½“å¤§å°è°ƒèŠ‚ | 2 | ~50 è¡Œ | âœ… |

---

## P9-T1: åˆ›å»º SaveButton ä¿å­˜æŒ‰é’®ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºä¿å­˜æŒ‰é’®ç»„ä»¶ï¼Œæ”¯æŒå¤šç§çŠ¶æ€å’Œåé¦ˆ

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/settings/SaveButton.tsx` (æ–°å¢)

### ç»„ä»¶æ¥å£
```typescript
type SaveButtonState = 'idle' | 'saving' | 'saved' | 'error';

type SaveButtonProps = {
  state: SaveButtonState;
  onClick: () => void;
  disabled?: boolean;
}
```

### çŠ¶æ€å±•ç¤º
- idle: "ğŸ’¾ ä¿å­˜è®¾ç½®" - primary æŒ‰é’®
- saving: "ä¿å­˜ä¸­..." - loading çŠ¶æ€
- saved: "âœ“ å·²ä¿å­˜" - 2ç§’åè‡ªåŠ¨æ¢å¤ idle
- error: "ä¿å­˜å¤±è´¥" - danger æ ·å¼

---

## P9-T2: åˆ›å»º SettingsCard è®¾ç½®å¡ç‰‡ç»„ä»¶ âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºè®¾ç½®åˆ†ç»„å¡ç‰‡ç»„ä»¶ï¼ˆå¤‡ç”¨ç»„ä»¶ï¼Œä¸»å¸ƒå±€ä½¿ç”¨ Collapseï¼‰

### æ–‡ä»¶æ¸…å•
- `apps/web/src/components/settings/SettingsCard.tsx` (æ–°å¢)
- `apps/web/src/components/settings/SettingsCard.module.css` (æ–°å¢)

---

## P9-T3: åˆ›å»º useSettingsForm Hook âœ…

### ä»»åŠ¡æè¿°
åˆ›å»ºè®¾ç½®è¡¨å• Hookï¼Œç®¡ç†è¡¨å•çŠ¶æ€å’Œä¿å­˜é€»è¾‘

### æ–‡ä»¶æ¸…å•
- `apps/web/src/hooks/useSettingsForm.ts` (æ–°å¢)

### Hook æ¥å£
```typescript
type UseSettingsFormReturn<T> = {
  values: T;
  setFieldValue: (field: keyof T, value: T[keyof T]) => void;
  isDirty: boolean;
  saveState: SaveButtonState;
  save: () => Promise<void>;
  reset: () => void;
}
```

---

## P9-T4: åˆ›å»ºå…¨å±€è®¾ç½® Store âœ…

### ä»»åŠ¡æè¿°
åˆ›å»º Zustand store å­˜å‚¨å…¨å±€è®¾ç½®ï¼ˆå¦‚å­—ä½“å¤§å°ï¼‰ï¼Œæ”¯æŒ localStorage æŒä¹…åŒ–

### æ–‡ä»¶æ¸…å•
- `apps/web/src/stores/settingsStore.ts` (æ–°å¢)

### Store æ¥å£
```typescript
type SettingsState = {
  fontSize: number;          // å…¨å±€å­—ä½“å¤§å° (12-18px)
  setFontSize: (size: number) => void;
}
```

---

## P9-T5: é‡æ„è®¾ç½®é¡µé¢ä¸ºå•é¡µæŠ˜å é¢æ¿ âœ…

### ä»»åŠ¡æè¿°
å°†åŸæœ‰å¤šå­é¡µé¢ç»“æ„é‡æ„ä¸ºå•é¡µé¢æŠ˜å é¢æ¿å½¢å¼

### æ–‡ä»¶æ¸…å•
- `apps/web/src/app/(dashboard)/settings/page.tsx` (é‡å†™)
- `apps/web/src/app/(dashboard)/settings/settings.module.css` (é‡å†™)
- `apps/web/src/app/(dashboard)/settings/layout.tsx` (ç®€åŒ–)

### æŠ˜å é¢æ¿ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®¾ç½®                                                            â”‚
â”‚  ç®¡ç†æ‚¨çš„è´¦å·ã€å›¢é˜Ÿå’Œç³»ç»Ÿé…ç½®                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¼ ğŸ‘¤ ä¸ªäººä¿¡æ¯                                                    â”‚
â”‚   [å¤´åƒ] [æ˜µç§°] [é‚®ç®±]                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ‘ å¤–è§‚è®¾ç½®                                                    â”‚
â”‚   å­—ä½“å¤§å°è°ƒèŠ‚ [A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ A] 14px                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ” è´¦å·å®‰å…¨                                                    â”‚
â”‚   ä¿®æ”¹å¯†ç è¡¨å•                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ”‘ API Token                                        [+ åˆ›å»º]  â”‚
â”‚   Token åˆ—è¡¨è¡¨æ ¼                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ”” é€šçŸ¥æ¸ é“                                                    â”‚
â”‚   æ¸ é“å¡ç‰‡åˆ—è¡¨ [å¼€å…³] [æµ‹è¯•] [åˆ é™¤]                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ‘¥ å›¢é˜Ÿç®¡ç†                                                    â”‚
â”‚   å›¢é˜Ÿä¿¡æ¯ + æˆå‘˜åˆ—è¡¨ + å±é™©æ“ä½œ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ âš™ï¸ é€šç”¨è®¾ç½® (ä»…ç®¡ç†å‘˜)                                         â”‚
â”‚   ç«™ç‚¹åç§°ã€åˆ†é¡µã€æ—¶åŒºã€è¯­è¨€ã€é€šçŸ¥å¼€å…³                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ‘¤ ç”¨æˆ·ç®¡ç† (ä»…ç®¡ç†å‘˜)                                         â”‚
â”‚   ç”¨æˆ·åˆ—è¡¨ã€è§’è‰²ä¿®æ”¹ã€é‡ç½®å¯†ç                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶ ğŸ“‹ æ“ä½œæ—¥å¿— (ä»…ç®¡ç†å‘˜)                              [åˆ·æ–°]     â”‚
â”‚   æ—¥å¿—åˆ—è¡¨ã€ç­›é€‰æ¡ä»¶                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ é™¤çš„æ—§æ–‡ä»¶
- `apps/web/src/app/(dashboard)/settings/account/`
- `apps/web/src/app/(dashboard)/settings/notifications/`
- `apps/web/src/app/(dashboard)/settings/team/`
- `apps/web/src/app/(dashboard)/settings/system/`
- `apps/web/src/app/(dashboard)/settings/general/`
- `apps/web/src/components/settings/SettingsMenu.tsx`
- `apps/web/src/components/settings/SettingsLayout.tsx`

---

## P9-T6: ä¼˜åŒ–å¸ƒå±€å’Œå­—ä½“å¤§å°è°ƒèŠ‚ âœ…

### ä»»åŠ¡æè¿°
- å±…ä¸­å¸ƒå±€ï¼Œä½¿ç”¨ em å•ä½å®ç°å“åº”å¼ç¼©æ”¾
- å­—ä½“å¤§å°è°ƒèŠ‚å½±å“å…¨å±€ï¼ˆé€šè¿‡ settingsStoreï¼‰
- éšè—è®¾ç½®é¡µé¢åŒ…å±‘

### æ–‡ä»¶æ¸…å•
- `apps/web/src/app/(dashboard)/layout.tsx` (ä¿®æ”¹)
- `apps/web/src/components/common/Breadcrumb.tsx` (ä¿®æ”¹)

### æ ·å¼è§„æ ¼
```css
.page {
  max-width: 60em;    /* éšå­—ä½“å¤§å°ç¼©æ”¾ */
  margin: 0 auto;
  padding: 1.5em;
}
```

---

## å¼€å‘æ—¥å¿—

| æ—¥æœŸ | ä»»åŠ¡ | å®Œæˆæƒ…å†µ | å¤‡æ³¨ |
|------|------|---------|------|
| 2025-12-04 | P9-T1 | âœ… | SaveButton ç»„ä»¶å®Œæˆ |
| 2025-12-04 | P9-T2 | âœ… | SettingsCard ç»„ä»¶å®Œæˆ |
| 2025-12-04 | P9-T3 | âœ… | useSettingsForm Hook å®Œæˆ |
| 2025-12-04 | P9-T4 | âœ… | settingsStore å®Œæˆï¼Œæ”¯æŒ localStorage æŒä¹…åŒ– |
| 2025-12-04 | P9-T5 | âœ… | è®¾ç½®é¡µé‡æ„ä¸ºå•é¡µæŠ˜å é¢æ¿ï¼Œåˆ é™¤æ—§å­é¡µé¢ |
| 2025-12-04 | P9-T6 | âœ… | å±…ä¸­å¸ƒå±€ + å…¨å±€å­—ä½“å¤§å°è°ƒèŠ‚ + éšè—é¢åŒ…å±‘ |

### æ–°å¢æ–‡ä»¶
- `apps/web/src/components/settings/SaveButton.tsx`
- `apps/web/src/components/settings/SettingsCard.tsx`
- `apps/web/src/components/settings/SettingsCard.module.css`
- `apps/web/src/hooks/useSettingsForm.ts`
- `apps/web/src/stores/settingsStore.ts`

### ä¿®æ”¹æ–‡ä»¶
- `apps/web/src/app/(dashboard)/settings/page.tsx` - å•é¡µæŠ˜å é¢æ¿é‡æ„
- `apps/web/src/app/(dashboard)/settings/settings.module.css` - em å•ä½å“åº”å¼æ ·å¼
- `apps/web/src/app/(dashboard)/settings/layout.tsx` - ç®€åŒ–ä¸ºé€ä¼ 
- `apps/web/src/app/(dashboard)/layout.tsx` - åº”ç”¨å…¨å±€å­—ä½“å¤§å°
- `apps/web/src/components/common/Breadcrumb.tsx` - è®¾ç½®é¡µéšè—é¢åŒ…å±‘
- `apps/web/src/components/settings/index.ts` - æ›´æ–°å¯¼å‡º

### è®¾è®¡å˜æ›´è¯´æ˜
åŸè®¡åˆ’é‡‡ç”¨å·¦ä¾§èœå•å¯¼èˆª + å¤šå­é¡µé¢çš„ä¼ ç»Ÿè®¾ç½®å¸ƒå±€ï¼Œä½†ç»ç”¨æˆ·åé¦ˆï¼š
1. æ¯ä¸ªå­é¡µé¢å†…å®¹è¾ƒå°‘ï¼Œåˆ‡æ¢ç¹ç
2. ä¸å¤Ÿç›´è§‚ï¼Œéœ€è¦å¤šæ¬¡ç‚¹å‡»

æœ€ç»ˆæ–¹æ¡ˆæ”¹ä¸ºå•é¡µé¢ + Ant Design Collapse æŠ˜å é¢æ¿ï¼š
1. æ‰€æœ‰è®¾ç½®é¡¹åœ¨ä¸€ä¸ªé¡µé¢ï¼Œä¸€ç›®äº†ç„¶
2. æŠ˜å é¢æ¿å¯å±•å¼€/æ”¶èµ·ï¼ŒèŠ‚çœç©ºé—´
3. å…¨å±€å­—ä½“å¤§å°è°ƒèŠ‚ï¼Œå½±å“æ•´ä¸ªåº”ç”¨
4. ä½¿ç”¨ em å•ä½ï¼Œå­—ä½“å˜å¤§æ—¶é¡µé¢å®½åº¦ä¹Ÿéšä¹‹å¢å¤§

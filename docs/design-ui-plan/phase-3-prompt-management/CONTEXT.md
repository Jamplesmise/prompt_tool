# Phase 3: 提示词管理优化

## 阶段概述

**目标**：优化提示词列表页面，增加批量操作、标签筛选和快速预览功能

**优先级**：P1

**前置依赖**：无

**涉及页面**：`/prompts` (提示词管理)

## 当前问题

1. 表格列布局需要优化，操作列过窄
2. 搜索框与按钮的视觉权重相同
3. 没有批量操作功能
4. 标签展示不够醒目
5. 无法快速预览提示词内容

## 优化目标

### 批量操作支持
- 多选复选框
- 批量删除、导出
- 全选/反选

### 标签系统增强
- 标签筛选器
- 彩色标签展示
- 支持多标签

### 快速预览
- 行悬停展示快捷操作
- 点击名称展开预览卡片
- 无需进入详情页即可查看内容

## 设计规范

### 列表页布局
```
┌───────────────────────────────────────────────────────────────────────────┐
│  提示词管理                                                                │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                           │
│  ┌───────────────────────────────────────────────────────────────────┐   │
│  │  🔍 搜索提示词名称或内容...          │ [标签筛选 ▼] │ + 新建提示词  │   │
│  └───────────────────────────────────────────────────────────────────┘   │
│                                                                           │
│  ┌───────────────────────────────────────────────────────────────────┐   │
│  │ □ │ 名称              │ 描述           │ 版本 │ 标签   │ 更新时间  │   │
│  ├───────────────────────────────────────────────────────────────────┤   │
│  │ □ │ GPT-4 通用助手    │ 通用对话提示词  │ v3   │ 🟢生产 │ 2分钟前  │   │
│  │   │ ──────────────────────────────────────────────────────────────│   │
│  │   │ 快捷操作: [编辑] [测试] [复制] [删除]                          │   │
│  ├───────────────────────────────────────────────────────────────────┤   │
│  │ □ │ 分类任务模板       │ 用于文本分类... │ v2   │ 🟡测试 │ 1小时前  │   │
│  └───────────────────────────────────────────────────────────────────┘   │
│                                                                           │
│  □ 全选    已选择 0 项    [批量删除] [批量导出]    共 25 项  < 1 2 3 >   │
│                                                                           │
└───────────────────────────────────────────────────────────────────────────┘
```

### 快速预览卡片
```
┌───────────────────────────────────────────────────────────────────────────┐
│ GPT-4 通用助手                                          v3 │ 🟢生产      │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                           │
│ System Prompt:                                                            │
│ ┌─────────────────────────────────────────────────────────────────────┐  │
│ │ 你是一个专业的 AI 助手，能够帮助用户解答各种问题。                     │  │
│ │ 请始终保持礼貌、专业的态度...                                        │  │
│ │ (更多内容...)                                                        │  │
│ └─────────────────────────────────────────────────────────────────────┘  │
│                                                                           │
│ 变量: {{user_name}}, {{context}}                                          │
│ 模型: gpt-4o                                                              │
│ 创建者: 张三                    更新时间: 2024-01-15 10:30               │
│                                                                           │
│                               [查看详情] [立即测试]                       │
└───────────────────────────────────────────────────────────────────────────┘
```

### 标签颜色映射
| 标签 | 颜色 |
|------|------|
| 生产 | #52C41A (绿) |
| 测试 | #FAAD14 (黄) |
| 开发 | #1677FF (蓝) |
| 归档 | #8c8c8c (灰) |

## 涉及文件

```
apps/web/src/
├── app/(dashboard)/prompts/page.tsx        # 提示词列表页面
├── components/prompt/
│   ├── PromptTable.tsx                     # 提示词表格组件 (新增)
│   ├── PromptPreviewCard.tsx               # 预览卡片组件 (新增)
│   ├── PromptFilters.tsx                   # 筛选器组件 (新增)
│   ├── PromptBatchActions.tsx              # 批量操作组件 (新增)
│   ├── TagSelect.tsx                       # 标签选择器 (新增)
│   └── index.ts
└── hooks/
    └── usePromptList.ts                    # 优化支持批量选择
```

## API 依赖

新增接口：
- `DELETE /api/v1/prompts/batch` - 批量删除
- `GET /api/v1/prompts/export?ids=...` - 批量导出

复用接口：
- `GET /api/v1/prompts` - 列表
- `GET /api/v1/prompts/:id` - 详情（预览用）

## 验收标准

### 功能
- [ ] 批量选择和操作正常
- [ ] 标签筛选正常
- [ ] 快速预览显示正确
- [ ] hover 时显示快捷操作

### 视觉
- [ ] 标签颜色醒目
- [ ] 预览卡片样式正确
- [ ] 表格 hover 效果

### 性能
- [ ] 大量数据渲染流畅
- [ ] 预览加载快速
